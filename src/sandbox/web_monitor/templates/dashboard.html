<!--
templates/dashboard.html
-------------------------
Ultramotion IGT â€” Web Monitor (Phase 2b)
Vue principale du tableau de bord temps rÃ©el.
Les valeurs sont mises Ã  jour via WebSocket (main.js).
-->

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ultramotion IGT â€” Dashboard</title>

    <!-- ðŸŽ¨ ThÃ¨me global -->
    <link rel="stylesheet" href="/assets/style.css" />
    <link rel="stylesheet" href="/assets/theme_dark.css" />

    <!-- ðŸ”— Favicon et icÃ´nes -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
    <link rel="manifest" href="/assets/site.webmanifest" />
    <meta name="theme-color" content="#0d1117" />

    <!-- ðŸ§  Logique WebSocket + DOM -->
    <script type="module" src="/javascript/main.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>ðŸš€ Ultramotion IGT â€” Live Dashboard</h1>
            <!-- (plus tard : nav bar / onglets) -->
        </header>

        <!-- ==================== MÃ‰TRIQUES ==================== -->
        <div id="metrics">

            <!-- ðŸ“Š Ã‰TAT GÃ‰NÃ‰RAL -->
            <div class="card">
                <h2>ðŸ“Š Ã‰tat GÃ©nÃ©ral</h2>
                <div class="metric">
                    <span class="metric-label">Statut</span>
                    <span id="health-status" class="status status-ok">OK</span>
                </div>
                <div class="metric">
                    <span class="metric-label">DerniÃ¨re mise Ã  jour</span>
                    <span id="last-update" class="metric-value">--:--:--</span>
                </div>
            </div>

            <!-- ðŸŽ¯ PIPELINE GPU-RÃ‰SIDENT -->
            <div class="card">
                <h2>ðŸŽ¯ Pipeline GPU-RÃ©sident (ms)</h2>
                <div class="metric">
                    <span class="metric-label">RX â†’ CPUâ†’GPU</span>
                    <span id="interstage-rx-gpu" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">CPUâ†’GPU â†’ PROC</span>
                    <span id="interstage-gpu-proc" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">PROC â†’ GPUâ†’CPU</span>
                    <span id="interstage-proc-cpu" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">GPUâ†’CPU â†’ TX</span>
                    <span id="interstage-cpu-tx" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">RX â†’ TX TOTAL</span>
                    <span id="interstage-total" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ã‰chantillons</span>
                    <span id="interstage-samples" class="metric-value">0</span>
                </div>
            </div>

            <!-- ðŸŽ® GPU TRANSFER -->
            <div class="card">
                <h2>ðŸŽ® GPU Transfer (ms)</h2>
                <div class="metric">
                    <span class="metric-label">Frames traitÃ©es</span>
                    <span id="gpu-frames" class="metric-value">0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Latence moyenne</span>
                    <span id="gpu-avg-lat" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Norm / Pin / Copy</span>
                    <span id="gpu-breakdown" class="metric-value">0 / 0 / 0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Throughput (FPS)</span>
                    <span id="gpu-throughput" class="metric-value">0.0</span>
                </div>
            </div>

            <!-- ðŸ’» GPU UTILISATION -->
            <div class="card">
                <h2>ðŸ’» GPU Utilisation</h2>
                <div class="metric">
                    <span class="metric-label">Device</span>
                    <span id="gpu-device" class="metric-value">N/A</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Driver / CUDA</span>
                    <span id="gpu-driver" class="metric-value">N/A</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Streams actifs</span>
                    <span id="gpu-streams" class="metric-value">N/A</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Utilisation (%)</span>
                    <span id="gpu-util" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">MÃ©moire utilisÃ©e (MB)</span>
                    <span id="gpu-memory" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">MÃ©moire rÃ©servÃ©e (MB)</span>
                    <span id="gpu-memory-reserved" class="metric-value">0.0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">DerniÃ¨re mise Ã  jour</span>
                    <span id="gpu-last-update" class="metric-value">-- s</span>
                </div>
            </div>

            <!-- ðŸ“˜ VALEURS DE RÃ‰FÃ‰RENCE GPU -->
            <div class="card">
                <h2>ðŸ“˜ Valeurs de RÃ©fÃ©rence GPU</h2>
                <div class="reference">
                    <div class="ref-header">Ã‰TAPE â†’ UTIL (%) | MEM. UTIL. | MEM. RÃ‰SERVÃ‰E</div>
                    <div><span>Idle</span> ........... 0â€“2 % | 200â€“400 MB | 400â€“600 MB</div>
                    <div><span>D-FINE</span> ........ 60â€“80 % | 600â€“900 MB | 1000â€“1300 MB</div>
                    <div><span>MobileSAM</span> ..... 80â€“99 % | 1000â€“1600 MB | 1800â€“2400 MB</div>
                    <div><span>Post-clean</span> .... 5â€“10 % | 200â€“400 MB | 400â€“600 MB</div>
                </div>
                <div class="ref-note">
                    ðŸ’¡ Valeurs typiques RTX 3080/4080 (varient selon GPU)
                </div>
            </div>

            <!-- ðŸ“¦ FILES Dâ€™ATTENTE -->
            <div class="card">
                <h2>ðŸ“¦ Files dâ€™attente</h2>
                <div class="metric">
                    <span class="metric-label">Queue RT</span>
                    <span id="queue-rt" class="metric-value">0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Queue GPU</span>
                    <span id="queue-gpu" class="metric-value">0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Drops RT</span>
                    <span id="queue-drops" class="metric-value">0</span>
                </div>
            </div>
        </div>

        <!-- ==================== PIED DE PAGE ==================== -->
        <footer class="footer">
            <p>Ultramotion IGT â€” Web Monitor Â· actualisation 1 s</p>
        </footer>
    </div>
</body>
</html>
